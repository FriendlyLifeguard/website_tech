<!DOCTYPE html><html lang="en-GB" data-astro-cid-5hce7sga><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Understanding Ethereum PoS: Validators, RANDAO, and Finality in the Beacon Chain • Beginnings</title><!-- KaTeX CSS --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous"><!-- Icons / Favicon --><link rel="icon" href="/favicon.ico" sizes="any"><link rel="icon" href="/icon.svg" type="image/svg+xml"><link rel="manifest" href="/manifest.webmanifest"><link rel="canonical" href="https://alankang.xyz/posts/eth20_basics/"><!-- Primary Meta Tags --><meta name="title" content="Understanding Ethereum PoS: Validators, RANDAO, and Finality in the Beacon Chain • Beginnings"><meta name="description" content="Key concepts in beacon chain"><meta name="author" content="Alan Kang"><!-- Theme Colour --><meta name="theme-color" content=""><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:title" content="Understanding Ethereum PoS: Validators, RANDAO, and Finality in the Beacon Chain"><meta property="og:description" content="Key concepts in beacon chain"><meta property="og:url" content="https://alankang.xyz/posts/eth20_basics/"><meta property="og:site_name" content="Beginnings"><meta property="og:locale" content="en_GB"><meta property="og:image" content="https://alankang.xyz/og-image/eth20_basics.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="article:author" content="Alan Kang"><meta property="article:published_time" content="2025-02-13T00:00:00.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://alankang.xyz/posts/eth20_basics/"><meta property="twitter:title" content="Understanding Ethereum PoS: Validators, RANDAO, and Finality in the Beacon Chain"><meta property="twitter:description" content="Key concepts in beacon chain"><meta property="twitter:image" content="https://alankang.xyz/og-image/eth20_basics.png"><!-- Sitemap --><link rel="sitemap" href="/sitemap-index.xml"><!-- RSS auto-discovery --><link rel="alternate" type="application/rss+xml" title="Beginnings" href="/rss.xml"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_slug_.f6a10529.css" /><script type="module" src="/_astro/hoisted.e9800797.js"></script>
<script type="module" src="/_astro/page.30c903a1.js"></script>
<script>window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
		var script = document.createElement('script');
		script.defer = true;
		script.src = '/_vercel/insights/script.js';
		var head = document.querySelector('head');
		head.appendChild(script);
	</script></head><body data-astro-cid-5hce7sga><script>
	function getUserPref() {
		const storedTheme = typeof localStorage !== "undefined" && localStorage.getItem("theme");
		return (
			storedTheme || (window.matchMedia("(prefers-color-scheme: light)").matches ? "light" : "dark")
		);
	}

	function setTheme(theme) {
		const colorThemeMetaTag = document.querySelector("meta[name='theme-color']");
		document.documentElement.classList.toggle("dark", theme === "dark");
		const bgColour = getComputedStyle(document.body).getPropertyValue("--theme-bg");

		colorThemeMetaTag.setAttribute("content", `hsl(${bgColour})`);
		if (typeof localStorage !== "undefined") {
			localStorage.setItem("theme", theme);
		}
	}

	// initial setup
	setTheme(getUserPref());

	// View Transitions hook to restore theme mode
	document.addEventListener("astro:after-swap", () => setTheme(getUserPref()));

	// listen for theme-change custom event, fired in src/components/ThemeToggle.astro
	document.addEventListener("theme-change", (e) => {
		setTheme(e.detail.theme);
	});
</script><a href="#main" class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5">skip to content
</a><div class="mx-auto max-w-[100ch]" data-astro-cid-5hce7sga><header id="main-header" class="group relative mb-28 flex items-center justify-between" data-astro-transition-persist="astro-t24eiqgj-1"><div class="flex sm:flex-col"><a href="/" class="group inline-flex items-center gap-2 hover:opacity-90 transition-all duration-200 sm:relative sm:inline-block"><span class="text-lg font-semibold text-accent/90 group-hover:text-accent transition-colors duration-200">Home</span></a><nav id="navigation-menu" class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none" aria-label="Main menu"></nav></div><div class="flex items-center gap-4"><theme-toggle class="ms-2 sm:ms-4"><button type="button" id="toggle-theme" class="group relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2" aria-label="Toggle Dark Mode"><svg id="sun-svg" class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all group-aria-pressed:scale-100 group-aria-pressed:opacity-100" aria-hidden="true" focusable="false" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg><svg id="moon-svg" class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all group-aria-[pressed=false]:scale-100 group-aria-[pressed=false]:opacity-100" aria-hidden="true" focusable="false" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"></circle><path d="M7.63262 3.06689C8.98567 3.35733 9.99999 4.56025 9.99999 6.00007C9.99999 7.65693 8.65685 9.00007 6.99999 9.00007C5.4512 9.00007 4.17653 7.82641 4.01685 6.31997" stroke="currentColor" stroke-width="1.5"></path><path d="M22 13.0505C21.3647 12.4022 20.4793 12 19.5 12C17.567 12 16 13.567 16 15.5C16 17.2632 17.3039 18.7219 19 18.9646" stroke="currentColor" stroke-width="1.5"></path><path d="M14.5 8.51L14.51 8.49889" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10 17C11.1046 17 12 16.1046 12 15C12 13.8954 11.1046 13 10 13C8.89543 13 8 13.8954 8 15C8 16.1046 8.89543 17 10 17Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></theme-toggle><script>
	const button = document.getElementById("toggle-theme");

	function setButtonPresssed() {
		const bodyThemeIsDark = document.documentElement.classList.contains("dark");
		button.setAttribute("aria-pressed", String(bodyThemeIsDark));
	}
	setButtonPresssed();
</script><button id="toggle-navigation-menu" class="group relative h-7 w-7 sm:invisible sm:hidden" type="button" aria-label="Open main menu" aria-expanded="false" aria-haspopup="menu"></button></div></header><main id="main" data-astro-cid-5hce7sga><div class="gap-x-10 lg:flex lg:items-start"><aside class="sticky top-20 order-2 -me-32 hidden basis-64 lg:block"><h2 class="font-semibold">Table of Contents</h2><ul class="mt-4 text-xs"><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#major-improvements-from-pow" aria-label="Scroll to section: Major Improvements From PoW"><span class="me-0.5">#</span>Major Improvements From PoW</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#introduction-to-validators" aria-label="Scroll to section: Introduction to Validators"><span class="me-0.5">#</span>Introduction to Validators</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#achieving-decentralized-pseudorandomness-with-randao" aria-label="Scroll to section: Achieving Decentralized Pseudorandomness with RANDAO"><span class="me-0.5">#</span>Achieving Decentralized Pseudorandomness with RANDAO</a><ul><li class="ms-2"><a class="block line-clamp-2 hover:text-accent mt-2 text-[0.6875rem]" href="#randao-limitation-and-mitigation" aria-label="Scroll to section: RANDAO Limitation and Mitigation"><span class="me-0.5">#</span>RANDAO Limitation and Mitigation</a></li></ul></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#supermajority" aria-label="Scroll to section: Supermajority"><span class="me-0.5">#</span>Supermajority</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#attesting-and-reaching-finality" aria-label="Scroll to section: Attesting and Reaching Finality"><span class="me-0.5">#</span>Attesting and Reaching Finality</a><ul><li class="ms-2"><a class="block line-clamp-2 hover:text-accent mt-2 text-[0.6875rem]" href="#checkpoints-as-anchors" aria-label="Scroll to section: Checkpoints as Anchors"><span class="me-0.5">#</span>Checkpoints as Anchors</a></li><li class="ms-2"><a class="block line-clamp-2 hover:text-accent mt-2 text-[0.6875rem]" href="#how-this-ensures-finality" aria-label="Scroll to section: How This Ensures Finality"><span class="me-0.5">#</span>How This Ensures Finality</a></li></ul></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#brief-introduction-to-slashing" aria-label="Scroll to section: Brief Introduction to Slashing"><span class="me-0.5">#</span>Brief Introduction to Slashing</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#final-thoughts" aria-label="Scroll to section: Final Thoughts"><span class="me-0.5">#</span>Final Thoughts</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#acknowledgements" aria-label="Scroll to section: Acknowledgements"><span class="me-0.5">#</span>Acknowledgements</a></li></ul></aside><article class="flex-grow break-words" data-pagefind-body><div id="blog-hero"><h1 class="title mb-3 sm:mb-1">Understanding Ethereum PoS: Validators, RANDAO, and Finality in the Beacon Chain</h1><div class="flex flex-wrap items-center gap-x-3 gap-y-2"><p class="font-semibold"><time datetime="2025-02-13T00:00:00.000Z">February 12, 2025</time> / 9 min read</p></div><div class="mt-3"><svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" class="me-1 inline-block h-6 w-6" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7.859 6h-2.834a2.025 2.025 0 0 0 -2.025 2.025v2.834c0 .537 .213 1.052 .593 1.432l6.116 6.116a2.025 2.025 0 0 0 2.864 0l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-6.117 -6.116a2.025 2.025 0 0 0 -1.431 -.593z"></path><path d="M17.573 18.407l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-7.117 -7.116"></path><path d="M6 9h-.01"></path></svg><a class="cactus-link inline-block before:content-['#']" aria-label="View more blogs with the tag ethereum" href="/tags/ethereum/" data-pagefind-filter="tag">ethereum</a>, <a class="cactus-link inline-block before:content-['#']" aria-label="View more blogs with the tag consensus" href="/tags/consensus/" data-pagefind-filter="tag">consensus</a></div></div><div class="prose prose-sm prose-cactus mt-12 max-w-[100ch] prose-headings:font-semibold prose-headings:text-accent-2 prose-headings:before:absolute prose-headings:before:-ms-4 prose-headings:before:text-accent prose-headings:before:content-['#'] prose-th:before:content-none prose-img:max-w-[700px] prose-img:mx-auto [&_a]:text-blue-500 [&_a]:no-underline hover:[&_a]:underline hover:![&_a]:underline prose-h1:text-3xl"><p>*Thank y</p>
<p>The Merge event occurred on September 15, 2022. This was a pivotal moment for Ethereum, as it transitioned from <strong>Proof of Work</strong> (PoW) to <strong>Proof of Stake</strong> (PoS) consensus. The new consensus introduced many changes, including new roles for network participants (now called validators), new ways of propagating/finalizing blocks and the concept of slashing. This article collects different concepts that are important to understanding the Beacon Chain.</p>
<p>Let’s dive in!</p>
<h2 id="major-improvements-from-pow">Major Improvements From PoW</h2>
<p>Under PoW consensus, network participants (<strong>miners</strong>) competed to generate a valid hash under network’s <a href="https://learnmeabitcoin.com/beginners/guide/difficulty/#:~:text=The%20difficulty%20is%20a%20number,new%20blocks%20to%20the%20blockchain." target="_blank">difficulty value.</a> Once the miner brute-forced a valid hash, they earned the right to propose a block and received a block reward upon acceptance of that block. Historically, on Ethereum, a PoW block was generated every ~12 seconds, and the difficulty level adjusted so that the block is produced at this rate.</p>
<p>Over time, both the number of miners and the network’s hash rate increased, causing the difficulty level to <a href="https://www.blockchain.com/explorer/charts/hash-rate" target="_blank">rise</a> as well. (The hash rate in Ethereum follows the same trend as Bitcoin’s hash rate.) This created greater competition among miners, who had to generate even more hashes per second to earn the right to propose a block. Generating more hashes required additional ASICs or GPUs, increasing energy consumption to power and maintain the machines.</p>
<p>However, under PoS consensus, network participants no longer compete by hashing. Instead, they attest to and propose new blocks under algorithmic control. These participants are called <strong>validators</strong>, and this transition from PoW to PoS reduced Ethereum’s energy consumption by <a href="https://ethereum.org/en/roadmap/merge/" target="_blank">99.95%.</a></p>
<h2 id="introduction-to-validators">Introduction to Validators</h2>
<p>In Beacon Chain, a validator is a new role that didn’t exist under PoW consensus. To become a validator, you need to deposit(stake) 32 ETH into a Beacon Chain client. <em>(See <a href="https://launchpad.ethereum.org/en/" target="_blank">official documentation</a> for detailed steps on becoming a validator.)</em></p>
<p>On the Beacon Chain, the passage of time is organized into <strong>slots</strong> and <strong>epochs</strong>.</p>
<ul>
<li>A slot appears every 12 seconds.</li>
<li>An epoch contains 32 slots (so one epoch lasts 6.4 minutes) and is used to create checkpoints that help finalize blocks and transactions.</li>
</ul>
<p><img src="/_astro/epoch_slots.0665a15a_1olKxb.webp" alt="slot_epoch" width="679" height="190" loading="lazy" decoding="async"></p>
<p>From the active pool of validators, a subset is randomly chosen to act as either part of a <strong>committee</strong> or a <strong>block proposer</strong> (or both). This random selection is determined by RANDAO.</p>
<ul>
<li>
<p>If a validator is chosen as a block proposer, it proposes a new block at its designated slot. (An empty slot may occur if the designated proposer is inactive, causing no block to be produced.)</p>
</li>
<li>
<p>If a validator chosen to be part of a committee, it will attest to the proposed block during its slot within the epoch.</p>
</li>
</ul>
<p><strong>Key Points</strong></p>
<ul>
<li>A validator is only part of one committee per epoch.</li>
<li>More than one committee can exist in a single slot.</li>
<li>All committees have the same size (at least 128 validators).</li>
</ul>
<p><img src="/_astro/randao.c9652a05_1CliaT.webp" alt="randao" width="520" height="479" loading="lazy" decoding="async"></p>
<p><em>Committee assignments happen before a new epoch begins, while block proposers are assigned once the epoch starts.</em></p>
<p>Next, let’s see how RANDAO underpins these random assignments.</p>
<h2 id="achieving-decentralized-pseudorandomness-with-randao">Achieving Decentralized Pseudorandomness with RANDAO</h2>
<p>On the Beacon Chain, the <strong>RANDAO</strong> value is crucial for determining committee assignments and block proposers for upcoming epochs. Each slot’s block proposer reveals a random value (<em>via BLS signatures</em>) and mixes it with the previously accumulated RANDAO state.</p>
<ol>
<li>
<a href="https://github.com/ethereum/consensus-specs/blob/7480d0334fd81cd029bc85b38c5c7bdc2967acbf/specs/phase0/validator.md?plain=1#L324-L329" target="_blank"><strong>Revealing</strong></a>
</li>
</ol>
<ul>
<li>The block proposer for a given slot creates a BLS signature over the current epoch number using its <strong>secret key</strong>. This signature becomes the RANDAO value for that slot. If the proposer decides to not propose a block, it also does not contribute to RANDAO.</li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0"><code><span class="line"><span style="color:#FF79C6">def</span><span style="color:#F8F8F2"> </span><span style="color:#50FA7B">get_epoch_signature</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">state</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconState, </span><span style="color:#FFB86C;font-style:italic">block</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconBlock, </span><span style="color:#FFB86C;font-style:italic">privkey</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD;font-style:italic">int</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> BLSSignature:</span></span>
<span class="line"><span style="color:#F8F8F2">    domain </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> get_domain(state, </span><span style="color:#BD93F9">DOMAIN_RANDAO</span><span style="color:#F8F8F2">, compute_epoch_at_slot(block.slot))</span></span>
<span class="line"><span style="color:#F8F8F2">    signing_root </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> compute_signing_root(compute_epoch_at_slot(block.slot), domain)</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> bls.Sign(privkey, signing_root)</span></span></code></pre>
<ol start="2">
<li>
<a href="https://github.com/ethereum/consensus-specs/blob/9d1e7087b3d0e5d3861b67dcf932158e26332fe3/specs/phase0/beacon-chain.md?plain=1#L1729-L1741"><strong>Mixing</strong></a>
</li>
</ol>
<ul>
<li>The revealed RANDAO value is <strong>XORed</strong> with the previously mixed RANDAO value stored in the state. This ensures that multiple validators collectively contribute randomness, leading to fair and decentralized selection of block proposers and committees in the next epoch.</li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0"><code><span class="line"><span style="color:#FF79C6">def</span><span style="color:#F8F8F2"> </span><span style="color:#50FA7B">process_randao</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">state</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconState, </span><span style="color:#FFB86C;font-style:italic">body</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconBlockBody) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">None</span><span style="color:#F8F8F2">:</span></span>
<span class="line"><span style="color:#F8F8F2">    epoch </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> get_current_epoch(state)</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#6272A4"># Verify RANDAO reveal</span></span>
<span class="line"><span style="color:#F8F8F2">    proposer </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> state.validators[get_beacon_proposer_index(state)]</span></span>
<span class="line"><span style="color:#F8F8F2">    signing_root </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> compute_signing_root(epoch, get_domain(state, </span><span style="color:#BD93F9">DOMAIN_RANDAO</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#FF79C6">assert</span><span style="color:#F8F8F2"> bls.Verify(proposer.pubkey, signing_root, body.randao_reveal)</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#6272A4"># Mix in RANDAO reveal</span></span>
<span class="line"><span style="color:#F8F8F2">    mix </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> xor(get_randao_mix(state, epoch), </span><span style="color:#8BE9FD">hash</span><span style="color:#F8F8F2">(body.randao_reveal))</span></span>
<span class="line"><span style="color:#F8F8F2">    state.randao_mixes[epoch </span><span style="color:#FF79C6">%</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">EPOCHS_PER_HISTORICAL_VECTOR</span><span style="color:#F8F8F2">] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> mix</span></span></code></pre>
<p>The final RANDAO value at the end of an epoch (or the most recent proposed slot) is used to select block proposers and committees for the next epoch. This design achieves decentralized pseudorandomness with high entropy (256 bits derived from each validator’s secret key).</p>
<p><em>For a deeper look at RANDAO and its intricacies, see Ben Edgington’s <a href="https://eth2book.info/capella/part2/building_blocks/randomness/" target="_blank">in-depth explanation</a>.</em></p>
<h3 id="randao-limitation-and-mitigation">RANDAO Limitation and Mitigation</h3>
<p>Let’s look at a situation where Bob controls two validators that were chosen to be last two block proposers in an epoch (slot 30 and 31). Bob wants to precompute the best RANDAO value to his favor.</p>
<p>Bob can precompute the best RANDAO value by:</p>
<ul>
<li>Proposing a block in both slot 30 and 31.</li>
<li>Proposing a block in slot 30 and not in slot 31 (Missing out reward in slot 31).</li>
<li>Proposing a block in slot 31 and not in slot 30 (Missing out reward in slot 30).</li>
<li>Not proposing a block in either slot 30 or 31 (Missing out reward in both slots).</li>
</ul>
<p><em>Note: Not proposing a block means that the RANDAO value remains unchanged.</em></p>
<p>We can see that Bob has full control of what he can do with the two validators. He can strategically choose to <em>propose or not propose</em> blocks. He also has the option to precompute by changing the order of his validators.</p>
<p>Given this situation, in the previous iteration of the <code>process_randao</code> function, Bob would have maximum grinding opportunity that allowed him to generate new RANDAO values by changing the order of his validators. However, the function was improved by replacing hash  operation. XOR operation naturally carries commutative property which meant that the RANDAO value would be the <a href="https://notes.ethereum.org/@JustinDrake/rkPjB1_xr#:~:text=XORing%20vs%20hash,formal%20lower%20bounds." target="_blank">same</a> regardless of the order of the validators.</p>
<p>The change happened in the following <a href="https://github.com/ethereum/consensus-specs/pull/496" target="_blank">discussion</a> that ultimately lead to reverting back to the XOR operation instead of hash.</p>
<p><em>Specific <a href="https://github.com/ethereum/consensus-specs/pull/498/commits/438c013a8ca78095c690866bad23bfb7c6e97bbb" target="_blank">commit</a> to the change.</em></p>
<p><img src="/_astro/randao_change.e8468add_2dyM4f.webp" alt="randao_xor_change" width="2235" height="437" loading="lazy" decoding="async"></p>
<p>We can see from the last two lines that the mix operation was changed to use XOR operation instead. (We still utilize hash operation to reduce the size of the <a href="https://eth2book.info/capella/part2/building_blocks/randomness/#updating-the-randao:~:text=Second%2C%20the%20hash,of%20BLS%20signatures" target="_blank">revealed RANDAO value</a> from 768 bits to 256 bits.) The change has greatly reduced the randomness that Bob could’ve taken advantage of to precompute new RANDAO values that can favor his validators on next epoch.</p>
<h2 id="supermajority">Supermajority</h2>
<p>On the Beacon Chain, the head of the chain is determined once at least two-thirds of the validators’ <a href="https://eth2book.info/capella/part2/incentives/balances/#li_2" target="_blank"><strong>effective balance</strong></a> has attested to a particular checkpoint. Because finality depends on reaching this threshold, an entity controlling 33% or more of the total stake can disrupt or delay consensus by preventing the network from achieving a supermajority.</p>
<h2 id="attesting-and-reaching-finality">Attesting and Reaching Finality</h2>
<p>On the Beacon Chain, validators issue two primary types of votes:</p>
<ol>
<li><strong>LMD GHOST Vote</strong> - Attesting to a proposed block within a slot to help the network agree on the head of the chain.</li>
<li><strong>FFG Vote</strong> - Attesting to a checkpoint to confirm the finality of past proposed blocks.</li>
</ol>
<h3 id="checkpoints-as-anchors">Checkpoints as Anchors</h3>
<p>A <strong>checkpoint</strong> is typically the fist proposed block at the start of each epoch (or the most recently proposed block if none appeared in that epoch’s first slot). These checkpoints serve as <em>anchors</em> for the chain. Validators not only attest to the individual blocks in each slot but also to these checkpoints.</p>
<ul>
<li>If a checkpoint reaches a supermajority, the chain deems that checkpoint is <em>justified</em>.</li>
<li>Once the next checkpoint is also justified, the previous checkpoint becomes <em>finalized</em>.</li>
</ul>
<h3 id="how-this-ensures-finality">How This Ensures Finality</h3>
<ol>
<li><strong>Checkpoint justification -&gt; Finality</strong></li>
</ol>
<ul>
<li>If the current epoch’s checkpoint passes, the previous epoch’s checkpoint becomes justified. It waits for the subsequent checkpoint to pass in order to reach finality. This means a checkpoint accounts for the blocks in the previous epoch. For instance, the second epoch’s checkpoint covers all blocks that appeared in the first epoch and the second epoch’s checkpoint block.</li>
<li>When the next checkpoint is also justified, the previous one is then finalized. All blocks leading up to that finalized checkpoint slot are considered irreversible unless a large share of validators (~33%) risk slashing themselves.</li>
</ul>
<ol start="2">
<li><strong>Referencing Past Checkpoints</strong></li>
</ol>
<ul>
<li>Because epochs move in 32-slot intervals, it’s possible multiple epochs refer to the same checkpoint when there hasn’t been a newly proposed block at the start of an epoch, or if finality hasn’t advanced.</li>
<li>If a validator sees a no new checkpoint in upcoming epochs, it continues to reference the last known checkpoint as the chain’s head.</li>
</ul>
<ol start="3">
<li><strong>Every Epoch Has a Checkpoint</strong></li>
</ol>
<ul>
<li>Even if the first slot in an epoch is empty, the protocol design ensures each epoch includes a block designated as its checkpoint.</li>
</ul>
<p>By combining <strong>LMD GHOST vote</strong> to choose the latest head of the chain with <strong>FFG vote</strong> to justify and finalize checkpoints, the Beacon Chain achieves both liveness (the ability to keep producing new blocks) and safety (the assurance that finalized blocks cannot be reverted without severe penalties to misbehaving validators).</p>
<h2 id="brief-introduction-to-slashing">Brief Introduction to Slashing</h2>
<p>It is vital that validators attest to the right blocks and checkpoints to reach finality. To enforce that finality is always truthful, those that attest to blocks that have reached supermajority are rewarded while those attest to untruthful blocks are punished. A truthful validator can also report a malicious validator by reading on-chain events and this is known as a <a href="https://eth2book.info/capella/part2/incentives/slashing/#the-whistleblower-reward" target="_blank">whistleblower reward</a>.</p>
<p>A malicious validator will be <strong>slashed</strong> from their total stake thus decreasing their effective balance. Lower effective balance can lead to less influence during attestations and less chance to be selected as a block proposer.</p>
<p>List of events that are subjected to slashing can include:</p>
<ol>
<li>Attesting to a block that is not finalized later.</li>
<li>Not attesting to a block in an assigned slot (inactivity).</li>
<li>Double proposal: proposing more than one block in a slot.</li>
</ol>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>In summary, the Beacon Chain brings major improvements by replacing PoW’s high-energy hashing competition with a more efficient system of validators and attestations. The RANDAO mechanism (chaining BLS signatures) create a fair, decentralized source of randomness, while checkpoints provide a robust method to finalize blocks. Finally, slashing enforces honest behavior by penalizing different types of malicious actions. Together, these innovations help Ethereum remain secure, efficient, and decentralized.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>Thank you <a href="https://x.com/jameshe_eth">James</a> for taking the time to review the content.</p></div></article></div><button id="to-top-btn" class="z-90 fixed bottom-8 end-4 flex h-10 w-10 translate-y-28 items-center justify-center rounded-full border-2 border-transparent bg-zinc-200 text-3xl opacity-0 transition-all duration-300 hover:border-zinc-400 data-[show=true]:translate-y-0 data-[show=true]:opacity-100 dark:bg-zinc-700 sm:end-8 sm:h-12 sm:w-12" aria-label="Back to Top" data-show="false"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path></svg></button></main><footer class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top text-gray-500 sm:flex-row sm:justify-between sm:text-xs"><div class="me-0 sm:me-4">
Copyright &copy; 2025 Alan Kang</div><nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500"><a href="/" class="px-4 py-2 sm:px-2 sm:py-0 sm:hover:text-textColor sm:hover:underline">Home</a></nav></footer></div></body></html>