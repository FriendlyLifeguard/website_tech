<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>A Gentle Introduction to Beacon Chain • Beginnings</title><!-- KaTeX CSS --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous"><!-- Icons / Favicon --><link rel="icon" href="/favicon.ico" sizes="any"><link rel="icon" href="/icon.svg" type="image/svg+xml"><link rel="manifest" href="/manifest.webmanifest"><link rel="canonical" href="https://alankang.xyz/posts/eth20_basics/"><!-- Primary Meta Tags --><meta name="title" content="A Gentle Introduction to Beacon Chain • Beginnings"><meta name="description" content="Key concepts in beacon chain"><meta name="author" content="Alan Kang"><!-- Theme Colour --><meta name="theme-color" content=""><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:title" content="A Gentle Introduction to Beacon Chain"><meta property="og:description" content="Key concepts in beacon chain"><meta property="og:url" content="https://alankang.xyz/posts/eth20_basics/"><meta property="og:site_name" content="Beginnings"><meta property="og:locale" content="en_GB"><meta property="og:image" content="https://alankang.xyz/og-image/eth20_basics.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="article:author" content="Alan Kang"><meta property="article:published_time" content="2025-02-13T00:00:00.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://alankang.xyz/posts/eth20_basics/"><meta property="twitter:title" content="A Gentle Introduction to Beacon Chain"><meta property="twitter:description" content="Key concepts in beacon chain"><meta property="twitter:image" content="https://alankang.xyz/og-image/eth20_basics.png"><!-- Sitemap --><link rel="sitemap" href="/sitemap-index.xml"><!-- RSS auto-discovery --><link rel="alternate" type="application/rss+xml" title="Beginnings" href="/rss.xml"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_slug_.c1813434.css" /><script type="module" src="/_astro/hoisted.e9800797.js"></script>
<script type="module" src="/_astro/page.30c903a1.js"></script>
<script>window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
		var script = document.createElement('script');
		script.defer = true;
		script.src = '/_vercel/insights/script.js';
		var head = document.querySelector('head');
		head.appendChild(script);
	</script></head><body><script>
	function getUserPref() {
		const storedTheme = typeof localStorage !== "undefined" && localStorage.getItem("theme");
		return (
			storedTheme || (window.matchMedia("(prefers-color-scheme: light)").matches ? "light" : "dark")
		);
	}

	function setTheme(theme) {
		const colorThemeMetaTag = document.querySelector("meta[name='theme-color']");
		document.documentElement.classList.toggle("dark", theme === "dark");
		const bgColour = getComputedStyle(document.body).getPropertyValue("--theme-bg");

		colorThemeMetaTag.setAttribute("content", `hsl(${bgColour})`);
		if (typeof localStorage !== "undefined") {
			localStorage.setItem("theme", theme);
		}
	}

	// initial setup
	setTheme(getUserPref());

	// View Transitions hook to restore theme mode
	document.addEventListener("astro:after-swap", () => setTheme(getUserPref()));

	// listen for theme-change custom event, fired in src/components/ThemeToggle.astro
	document.addEventListener("theme-change", (e) => {
		setTheme(e.detail.theme);
	});
</script><a href="#main" class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5">skip to content
</a><header id="main-header" class="group relative mb-28 flex items-center justify-between" data-astro-transition-persist="astro-t24eiqgj-1"><div class="flex sm:flex-col"><a href="/" class="group inline-flex items-center gap-2 hover:opacity-90 transition-all duration-200 sm:relative sm:inline-block"><span class="text-lg font-semibold text-accent/90 group-hover:text-accent transition-colors duration-200">Home</span></a><nav id="navigation-menu" class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none" aria-label="Main menu"></nav></div><div class="flex items-center gap-4"><theme-toggle class="ms-2 sm:ms-4"><button type="button" id="toggle-theme" class="group relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2" aria-label="Toggle Dark Mode"><svg id="sun-svg" class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all group-aria-pressed:scale-100 group-aria-pressed:opacity-100" aria-hidden="true" focusable="false" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg><svg id="moon-svg" class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all group-aria-[pressed=false]:scale-100 group-aria-[pressed=false]:opacity-100" aria-hidden="true" focusable="false" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"></circle><path d="M7.63262 3.06689C8.98567 3.35733 9.99999 4.56025 9.99999 6.00007C9.99999 7.65693 8.65685 9.00007 6.99999 9.00007C5.4512 9.00007 4.17653 7.82641 4.01685 6.31997" stroke="currentColor" stroke-width="1.5"></path><path d="M22 13.0505C21.3647 12.4022 20.4793 12 19.5 12C17.567 12 16 13.567 16 15.5C16 17.2632 17.3039 18.7219 19 18.9646" stroke="currentColor" stroke-width="1.5"></path><path d="M14.5 8.51L14.51 8.49889" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10 17C11.1046 17 12 16.1046 12 15C12 13.8954 11.1046 13 10 13C8.89543 13 8 13.8954 8 15C8 16.1046 8.89543 17 10 17Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></theme-toggle><script>
	const button = document.getElementById("toggle-theme");

	function setButtonPresssed() {
		const bodyThemeIsDark = document.documentElement.classList.contains("dark");
		button.setAttribute("aria-pressed", String(bodyThemeIsDark));
	}
	setButtonPresssed();
</script><button id="toggle-navigation-menu" class="group relative h-7 w-7 sm:invisible sm:hidden" type="button" aria-label="Open main menu" aria-expanded="false" aria-haspopup="menu"></button></div></header><main id="main"><div class="gap-x-10 lg:flex lg:items-start"><aside class="sticky top-20 order-2 -me-32 hidden basis-64 lg:block"><h2 class="font-semibold">Table of Contents</h2><ul class="mt-4 text-xs"><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#major-improvements-from-pow" aria-label="Scroll to section: Major Improvements From PoW"><span class="me-0.5">#</span>Major Improvements From PoW</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#introduction-to-validators" aria-label="Scroll to section: Introduction to Validators"><span class="me-0.5">#</span>Introduction to Validators</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#achieving-decentralized-pseudorandomness-with-randao" aria-label="Scroll to section: Achieving Decentralized Pseudorandomness with RANDAO"><span class="me-0.5">#</span>Achieving Decentralized Pseudorandomness with RANDAO</a><ul><li class="ms-2"><a class="block line-clamp-2 hover:text-accent mt-2 text-[0.6875rem]" href="#randao-limitation-and-mitigation" aria-label="Scroll to section: RANDAO Limitation and Mitigation"><span class="me-0.5">#</span>RANDAO Limitation and Mitigation</a></li></ul></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#supermajority" aria-label="Scroll to section: Supermajority"><span class="me-0.5">#</span>Supermajority</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#attesting-and-reaching-finality" aria-label="Scroll to section: Attesting and Reaching Finality"><span class="me-0.5">#</span>Attesting and Reaching Finality</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#brief-introduction-to-slashing" aria-label="Scroll to section: Brief Introduction to Slashing"><span class="me-0.5">#</span>Brief Introduction to Slashing</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#final-thoughts" aria-label="Scroll to section: Final Thoughts"><span class="me-0.5">#</span>Final Thoughts</a></li><li class=""><a class="block line-clamp-2 hover:text-accent mt-3" href="#sources" aria-label="Scroll to section: Sources"><span class="me-0.5">#</span>Sources</a></li></ul></aside><article class="flex-grow break-words" data-pagefind-body><div id="blog-hero"><h1 class="title mb-3 sm:mb-1">A Gentle Introduction to Beacon Chain<span class="text-sm text-red-500 font-normal">(Draft)</span></h1><div class="flex flex-wrap items-center gap-x-3 gap-y-2"><p class="font-semibold"><time datetime="2025-02-13T00:00:00.000Z">February 12, 2025</time> / 10 min read</p></div><div class="mt-3"><svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" class="me-1 inline-block h-6 w-6" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7.859 6h-2.834a2.025 2.025 0 0 0 -2.025 2.025v2.834c0 .537 .213 1.052 .593 1.432l6.116 6.116a2.025 2.025 0 0 0 2.864 0l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-6.117 -6.116a2.025 2.025 0 0 0 -1.431 -.593z"></path><path d="M17.573 18.407l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-7.117 -7.116"></path><path d="M6 9h-.01"></path></svg><a class="cactus-link inline-block before:content-['#']" aria-label="View more blogs with the tag ethereum" href="/tags/ethereum/" data-pagefind-filter="tag">ethereum</a>, <a class="cactus-link inline-block before:content-['#']" aria-label="View more blogs with the tag consensus" href="/tags/consensus/" data-pagefind-filter="tag">consensus</a></div></div><div class="prose prose-sm prose-cactus mt-12 max-w-[100ch] prose-headings:font-semibold prose-headings:text-accent-2 prose-headings:before:absolute prose-headings:before:-ms-4 prose-headings:before:text-accent prose-headings:before:content-['#'] prose-th:before:content-none prose-img:max-w-[600px] prose-img:mx-auto [&_a]:text-blue-500 [&_a]:no-underline hover:[&_a]:underline hover:![&_a]:underline"><p>The Merge event happened on September 15, 2022. This was a pivotal moment for Ethereum as it transitioned from Proof of Work (PoW) to Proof of Stake (PoS) consensus. The new consensus introduced a lot of changes including new roles for network participants, new ways of propagating/finalizing blocks and the idea of slashing. This article contains collection of different concepts that are important to understand the beacon chain.</p>
<p>Let’s dive in!</p>
<h2 id="major-improvements-from-pow">Major Improvements From PoW</h2>
<p>Under PoW consensus, network participants were known as <strong>miners</strong> that raced to generate a unique hash under network’s <a href="https://learnmeabitcoin.com/beginners/guide/difficulty/#:~:text=The%20difficulty%20is%20a%20number,new%20blocks%20to%20the%20blockchain." target="_blank">difficulty value.</a> Once the miner brute forces the right hash, the miner earns the opportunity to propose a block and earns a block reward if the block gets accepted. Under the PoW consensus, a block is generated every ~10 minutes and the difficulty level increases or decreases to meet this criteria.</p>
<p>Over the years, the number of miners and hash rate have steadily <a href="https://www.blockchain.com/explorer/charts/hash-rate" target="_blank">increased</a> which meant that the difficulty level also increased. This lead to a higher competition for miners as they have to generate even more hashes per second to earn the right to propose a block. Generating more hashes meant that miners have to add more ASICs or GPUs which lead to an increase in energy consumption to power and maintain the machines.</p>
<p>However, under PoS consensus, network participants have transitioned from actively generating trillions of hashes to voting and proposing new blocks all under algorithmic control. These participants are called <em>validators</em>. This transition from PoW to PoS lead to reduction in energy consumption by <a href="https://ethereum.org/en/roadmap/merge/" target="_blank">99.5%.</a></p>
<h2 id="introduction-to-validators">Introduction to Validators</h2>
<p>Validator is a new role that didn’t exist previously in PoW consensus. To be able to become a validator, you need to deposit/stake 32 ETH into a Beacon Chain client. (<a href="https://launchpad.ethereum.org/en/" target="_blank">Guide</a> to get started on becoming a validator.)</p>
<p>On Beacon Chain, passage of time is organized into slots and epochs. A slot appears every 12 seconds and an epoch contains 32 slots (appears every 6.4 minutes) and it is used to create checkpoints to reach block/transaction finality which will get into it in later sections.</p>
<p><img src="/_astro/epoch_slots.0665a15a_1olKxb.webp" alt="slot_epoch" width="679" height="190" loading="lazy" decoding="async"></p>
<p>From the active pool of validators, a subset of validators can become either part of a committee or a block proposer or both! The selection processes are pseudorandom and determined by RANDAO.</p>
<ol>
<li>
<p>If a validator becomes a block proposer, the validator can propose a new block on the designated slot however, an empty slot can exist if the block proposer is inactive. (The validator is not penalized for not proposing a block but it will miss out on the rewards.)</p>
</li>
<li>
<p>If a validator becomes part of a committee, each committee is delegated to a slot within an epoch to attest on the proposed block.</p>
</li>
</ol>
<ul>
<li><em>A validator can only be part of one committee per epoch.</em></li>
<li><em>More than one committee can exist in each slot.</em></li>
<li><em>All committees are the same size and have at least 128 validators.</em></li>
</ul>
<p><img src="/_astro/randao.c9652a05_1CliaT.webp" alt="randao" width="520" height="479" loading="lazy" decoding="async"></p>
<p>The assignment of committees happens before a new epoch starts while block proposers are assigned once the epoch starts.</p>
<p>Next, we will dive into the role of RANDAO which is used to select block proposers and committees.</p>
<h2 id="achieving-decentralized-pseudorandomness-with-randao">Achieving Decentralized Pseudorandomness with RANDAO</h2>
<p><em>Please note that I abbreviated a lot of details that goes into the RANDAO process. I made this choice to simplify and streamline the explanation. To learn more, please refer to the <a href="https://eth2book.info/capella/part2/building_blocks/randomness/" target="_blank">in-depth explanation</a> written by Ben Edgington.</em></p>
<br/>
<p>On Beacon Chain, the role of RANDAO value is critical as it is used to determine the selection of committees and block proposers for each upcoming epochs.</p>
<p>The RANDAO value goes through a series of reveal and mix process for each slot by the block proposer.</p>
<ul>
<li>A block proposer is revealing and mixing their RANDAO value while also proposing a block.</li>
<li>If a block proposer does not propose a block, it also does not contribute to the RANDAO value.</li>
</ul>
<p>Revealing is simply the block proposer crafting a new RANDAO value in the proposed slot</p>
<ul>
<li><a href="https://github.com/ethereum/consensus-specs/blob/7480d0334fd81cd029bc85b38c5c7bdc2967acbf/specs/phase0/validator.md?plain=1#L324-L329" target="_blank">Revealing</a>: Revealing is a process of using a BLS signature scheme to create a signature in the current slot. The signature takes in message (current epoch number) and the block proposer’s secret key. The resulting signature is our RANDAO value. The last block proposer in each epoch finalizes the RANDAO value that will be used to elect block proposers and committees for the next epoch.</li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0"><code><span class="line"><span style="color:#FF79C6">def</span><span style="color:#F8F8F2"> </span><span style="color:#50FA7B">get_epoch_signature</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">state</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconState, </span><span style="color:#FFB86C;font-style:italic">block</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconBlock, </span><span style="color:#FFB86C;font-style:italic">privkey</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> </span><span style="color:#8BE9FD;font-style:italic">int</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> BLSSignature:</span></span>
<span class="line"><span style="color:#F8F8F2">    domain </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> get_domain(state, </span><span style="color:#BD93F9">DOMAIN_RANDAO</span><span style="color:#F8F8F2">, compute_epoch_at_slot(block.slot))</span></span>
<span class="line"><span style="color:#F8F8F2">    signing_root </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> compute_signing_root(compute_epoch_at_slot(block.slot), domain)</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> bls.Sign(privkey, signing_root)</span></span></code></pre>
<br/>
<p>Mixing is the process of combining the current slot’s RANDAO value with the previous mixed RANDAO value. Each block proposer collectively contributes to shuffling the RANDAO value which leads to a fair, decentralized way of electing block proposers and commitees on the next epoch.</p>
<ul>
<li><a href="https://github.com/ethereum/consensus-specs/blob/9d1e7087b3d0e5d3861b67dcf932158e26332fe3/specs/phase0/beacon-chain.md?plain=1#L1729-L1741">Mixing </a>: Before mixing, we first verify whether the signature was actually created by the validator. This is possible by taking block proposer’s public key, message and signature. If the signature is valid, we do xor operation between the current revealed RANDAO value with the previous mixed RANDAO value.</li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0"><code><span class="line"><span style="color:#FF79C6">def</span><span style="color:#F8F8F2"> </span><span style="color:#50FA7B">process_randao</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">state</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconState, </span><span style="color:#FFB86C;font-style:italic">body</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconBlockBody) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">None</span><span style="color:#F8F8F2">:</span></span>
<span class="line"><span style="color:#F8F8F2">    epoch </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> get_current_epoch(state)</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#6272A4"># Verify RANDAO reveal</span></span>
<span class="line"><span style="color:#F8F8F2">    proposer </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> state.validators[get_beacon_proposer_index(state)]</span></span>
<span class="line"><span style="color:#F8F8F2">    signing_root </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> compute_signing_root(epoch, get_domain(state, </span><span style="color:#BD93F9">DOMAIN_RANDAO</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#FF79C6">assert</span><span style="color:#F8F8F2"> bls.Verify(proposer.pubkey, signing_root, body.randao_reveal)</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#6272A4"># Mix in RANDAO reveal</span></span>
<span class="line"><span style="color:#F8F8F2">    mix </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> xor(get_randao_mix(state, epoch), </span><span style="color:#8BE9FD">hash</span><span style="color:#F8F8F2">(body.randao_reveal))</span></span>
<span class="line"><span style="color:#F8F8F2">    state.randao_mixes[epoch </span><span style="color:#FF79C6">%</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">EPOCHS_PER_HISTORICAL_VECTOR</span><span style="color:#F8F8F2">] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> mix</span></span></code></pre>
<br/>
<p>So to summarize, from slot 0 to 31, each block proposer reveals a RANDAO value and it fetches the previous mixed RANDAO value and does xor operation with the current revealed RANDAO value. The RANDAO value in the last slot (slot 31) or the most recent slot with proposed block in the current epoch is used to select the block proposer and committees for the next epoch.</p>
<p><img src="/_astro/randao_explanation.fc3e2670_7DOMf.svg" alt="randao_explanation" width="699" height="613" loading="lazy" decoding="async"></p>
<p>Thus, the process of each block proposer revealing and mixing RANDAO value achieves decentralized pseudorandomness with high entropy (256 bit from secret key).</p>
<p>As always, the RANDAO process is not always perfect. We will look into a particular change that RANDAO underwent to improve the process.</p>
<h3 id="randao-limitation-and-mitigation">RANDAO Limitation and Mitigation</h3>
<p>Let’s look at a situation where Bob controls two validators that were chosen to be last two block proposers in an epoch (slot 30 and 31). Bob wants to precompute the best RANDAO value to his favor.</p>
<p>Bob can precompute the best RANDAO value by:</p>
<p><em>Not proposing a block means that the RANDAO value remains unchanged</em></p>
<ol>
<li>Proposing a block in both slot 30 and 31.</li>
<li>Proposing a block in slot 30 and not in slot 31 (Missing out reward in slot 31).</li>
<li>Proposing a block in slot 31 and not in slot 30 (Missing out reward in slot 30).</li>
<li>Not proposing a block in either slot 30 or 31 (Missing out reward in both slots).</li>
</ol>
<p>In the case for #1, it is possible that if the order of validator is flipped, the final RANDAO value can be completely different. This might be an issue if Bob’s two validators becomes part of the last two block proposers again but in the flipped order. This allows Bob to precompute a completely new set of RANDAO values that can favor him.</p>
<p>However, the RANDAO limits the randomness by utilizing xor operation in the mixing process instead of hash operation to take advantage of its commutative property.</p>
<p>Justin mentions this example in a <a href="https://github.com/ethereum/consensus-specs/pull/496" target="_blank">discussion</a> that ultimately lead to reverting the mix operation to using xor operation instead of hash.</p>
<p>If we refer to the function again,</p>
<pre class="astro-code dracula" style="background-color:#282A36;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0"><code><span class="line"><span style="color:#FF79C6">def</span><span style="color:#F8F8F2"> </span><span style="color:#50FA7B">process_randao</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">state</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconState, </span><span style="color:#FFB86C;font-style:italic">body</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> BeaconBlockBody) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">None</span><span style="color:#F8F8F2">:</span></span>
<span class="line"><span style="color:#F8F8F2">    epoch </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> get_current_epoch(state)</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#6272A4"># Verify RANDAO reveal</span></span>
<span class="line"><span style="color:#F8F8F2">    proposer </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> state.validators[get_beacon_proposer_index(state)]</span></span>
<span class="line"><span style="color:#F8F8F2">    signing_root </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> compute_signing_root(epoch, get_domain(state, </span><span style="color:#BD93F9">DOMAIN_RANDAO</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#FF79C6">assert</span><span style="color:#F8F8F2"> bls.Verify(proposer.pubkey, signing_root, body.randao_reveal)</span></span>
<span class="line"><span style="color:#F8F8F2">    </span><span style="color:#6272A4"># Mix in RANDAO reveal</span></span>
<span class="line"><span style="color:#F8F8F2">    mix </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> xor(get_randao_mix(state, epoch), </span><span style="color:#8BE9FD">hash</span><span style="color:#F8F8F2">(body.randao_reveal))</span></span>
<span class="line"><span style="color:#F8F8F2">    state.randao_mixes[epoch </span><span style="color:#FF79C6">%</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">EPOCHS_PER_HISTORICAL_VECTOR</span><span style="color:#F8F8F2">] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> mix</span></span></code></pre>
<p>We can see from the last two lines that the mix operation uses xor operation on previous mixed RANDAO value and the current revealed RANDAO value. (We still utilize hash operation to reduce the size of the <a href="https://eth2book.info/capella/part2/building_blocks/randomness/#updating-the-randao:~:text=Second%2C%20the%20hash,of%20BLS%20signatures" target="_blank">revealed RANDAO value</a> from 768 bits to 256 bits.)</p>
<h2 id="supermajority">Supermajority</h2>
<p>The state of beacon chain is determined by attesting at least <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi mathvariant="normal">/</mi><mn>3</mn></mrow><annotation encoding="application/x-tex">2/3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">2/3</span></span></span></span> of the validator’s collective effective balance. Reaching this threshold is called a supermajority. This terminology is widely used to determine checkpoints
Given an attestation, the supermajority is the minimum number of validators that need to attest on the same block to reach finality.</p>
<h2 id="attesting-and-reaching-finality">Attesting and Reaching Finality</h2>
<p>Validators attest to a proposed block but they also attest on checkpoints. Checkpoints,  the first proposed block in each starting epoch, act as the anchor for the current head of the chain. If a checkpoint passes, all the proposed blocks in the previous epoch and the slot where the first block is proposed also becomes valid. In a case where if a validator does not detect any checkpoint block in upcoming epochs, it will refer to last known epoch’s checkpoint (starting block of that epoch) as the current head of the chain.</p>
<ul>
<li>
<p>If the current epoch’s checkpoint passes, the previous checkpoint becomes <em>justified</em>.
This is basically being in a pending state and it is waiting for the next checkpoint to be passed. Once the upcoming checkpoint passes, the previous epoch’s checkpoint becomes finalized and the blocks up to where the previous checkpoint attestation occurred is considered valid.</p>
</li>
<li>
<p>It is possible that multiple epochs can refer to the same checkpoint as checkpoints in those epochs are still in justified state.</p>
</li>
<li>
<p>A checkpoint is either the proposed block in the first slot for each epoch or the most recently proposed block is called a checkpoint.</p>
</li>
<li>
<p>There always exists a checkpoint in each epoch.</p>
</li>
<li>
<p>A block can be a checkpoint for multiple epochs.</p>
</li>
<li>
<p>A checkpoint accounts for the blocks in the previous epoch which means that the checkpoint that exists in the second epoch accounts for the blocks included in the first epoch.</p>
</li>
<li>
<p>A checkpoint that is accepted by the <strong>supermajority</strong> becomes <em>justified</em> and once the checkpoint that comes after also passes the supermajority, the previous checkpoint becomes <em>finalized</em>. Once the checkpoint is finalized, the consensus accepts that the proposed block up to the checkpoint is considered final.</p>
</li>
</ul>
<p>The attestation to vote on a checkpoint is called a <em>FFG Vote</em> and the attestation is done by every validator assigned under the committee.</p>
<p>A GHOST vote is done by individual validators that are delegated to a slot when a block is proposed.</p>
<p>This leads to two types of attestations:</p>
<ol>
<li>Attesting on individual block within a slot to determine the head of the chain (LMD Ghost Vote).</li>
<li>Attesting on a checkpoint to reach finality of an epoch (FFG Vote).</li>
</ol>
<h2 id="brief-introduction-to-slashing">Brief Introduction to Slashing</h2>
<p>It is vital that validators attest to the right blocks and checkpoints to reach finality. To enforce that finality is always truthful, those that attest to blocks that have reached supermajority are rewarded while those attest to untruthful blocks are punished. A truthful validator can also report a malicious validator by reading on-chain events and this is known as a <a href="https://eth2book.info/capella/part2/incentives/slashing/#the-whistleblower-reward" target="_blank">whistleblower reward</a>.</p>
<p>A malicious validator will be slashed from their total stake thus decreasing their effective balance. Lower effective balance can lead to less voting power during attestations and less chance to be selected as a block proposer.</p>
<p>Types of slashing can include:</p>
<ol>
<li>Attesting to a block that is not finalized later.</li>
<li>Not attesting to a block (inactivity).</li>
<li>Proposing to more than one block.</li>
</ol>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>In this article, we discussed some of the major concepts in beacon chain and how it is more energy efficient than PoW. In particular, we took a peak at the RANDAO process and BLS signature scheme that is used to compute and mix RANDAO values. Lastly, we briefly went over how beacon chain reaches finality through checkpoints and the consequence to validators who attest to untruthful blocks.</p>
<p>This is my first time writing about consensus mechanism and I’m hoping to dive deeper into each individual section that I mentioned in this article in future articles.</p>
<h2 id="sources">Sources</h2>
<p><a href="https://ethos.dev/beacon-chain#staking-rewards-and-penalties">https://ethos.dev/beacon-chain#staking-rewards-and-penalties</a></p>
<p><a href="https://launchpad.ethereum.org/en/">https://launchpad.ethereum.org/en/</a></p>
<p><a href="https://cointelegraph.com/news/the-merge-brings-down-ethereum-s-network-power-consumption-by-over-99-9">https://cointelegraph.com/news/the-merge-brings-down-ethereum-s-network-power-consumption-by-over-99-9</a></p>
<p><a href="https://bitcoin.org/bitcoin.pdf">https://bitcoin.org/bitcoin.pdf</a></p>
<p><a href="https://consensys.io/blog/the-ethereum-2-0-beacon-chain-explained">https://consensys.io/blog/the-ethereum-2-0-beacon-chain-explained</a></p>
<p><a href="https://kb.beaconcha.in/ethereum-staking/rewards-and-penalties">https://kb.beaconcha.in/ethereum-staking/rewards-and-penalties</a></p>
<p><a href="https://eth2book.info/capella/part2/building_blocks/randomness/">https://eth2book.info/capella/part2/building_blocks/randomness/</a></p>
<p><a href="https://github.com/ethereum/consensus-specs/pull/496">https://github.com/ethereum/consensus-specs/pull/496</a></p>
<p><a href="https://ethereum.org/en/roadmap/merge/">https://ethereum.org/en/roadmap/merge/</a></p></div></article></div><button id="to-top-btn" class="z-90 fixed bottom-8 end-4 flex h-10 w-10 translate-y-28 items-center justify-center rounded-full border-2 border-transparent bg-zinc-200 text-3xl opacity-0 transition-all duration-300 hover:border-zinc-400 data-[show=true]:translate-y-0 data-[show=true]:opacity-100 dark:bg-zinc-700 sm:end-8 sm:h-12 sm:w-12" aria-label="Back to Top" data-show="false"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path></svg></button></main><footer class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top text-gray-500 sm:flex-row sm:justify-between sm:text-xs"><div class="me-0 sm:me-4">
Copyright &copy; 2025 Alan Kang</div><nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500"><a href="/" class="px-4 py-2 sm:px-2 sm:py-0 sm:hover:text-textColor sm:hover:underline">Home</a></nav></footer></body></html>