---
import { getCollection } from "astro:content";
import PageLayout from "@/layouts/Base";
import PostPreview from "@/components/blog/PostPreview";
import SocialList from "@/components/SocialList";
import { sortMDByDate } from "@/utils";

const MAX_POSTS = 10;
const allPosts = await getCollection("post");
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);
---

<PageLayout meta={{ title: "Home" }}>
	<section class="flex flex-row items-start gap-8 mb-12">
		<img 
			src="/mainImage.png"
			alt="Alan Kang"
			class="w-40 h-40 rounded-lg border-2 border-accent/20 hidden sm:block" 
		/>
		<div class="flex-1">
			<h1 class="title mb-6 text-3xl font-bold">Hi, I'm Alan</h1>
			<p class="mb-4 text-xl">I work as a open source contributor mainly in the Starknet ecosystem. I also like to write about crypto.</p>
		</div>
	</section>

	<section class="mt-8">
		<h2 class="text-3xl font-bold text-accent mb-6">Featured Contributions</h2>
		<div class="space-y-6">
			<div class="rounded-lg bg-accent/10 p-6">
				<h3 class="font-semibold mb-4 text-xl text-accent border-b border-accent/20 pb-2">Cairo Book | Documentation</h3>
				<ul class="space-y-2">
					<li class="hover:bg-accent/10 p-2 rounded-md">
						<a href="https://github.com/cairo-book/cairo-book/pull/871" 
						   class="hover:text-accent transition-colors duration-200 flex items-center gap-2 group">
							<div class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-green-100 text-green-800">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
									<path d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"/>
								</svg>
								Merged
							</div>
							<span>Added Recursion and loop explanation</span>
							<svg class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200" 
								 xmlns="http://www.w3.org/2000/svg" 
								 fill="none" 
								 viewBox="0 0 24 24" 
								 stroke="currentColor">
								<path stroke-linecap="round" 
									  stroke-linejoin="round" 
									  stroke-width="2" 
									  d="M13 7l5 5m0 0l-5 5m5-5H6" />
							</svg>
						</a>
					</li>
					<li class="hover:bg-accent/10 p-2 rounded-md">
						<a href="https://github.com/cairo-book/cairo-book/pull/938" 
						   class="hover:text-accent transition-colors duration-200 flex items-center gap-2 group">
							<div class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-green-100 text-green-800">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
									<path d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"/>
								</svg>
								Merged
							</div>
							<span>Reworked copy trait explanation</span>
							<svg class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200" 
								 xmlns="http://www.w3.org/2000/svg" 
								 fill="none" 
								 viewBox="0 0 24 24" 
								 stroke="currentColor">
								<path stroke-linecap="round" 
									  stroke-linejoin="round" 
									  stroke-width="2" 
									  d="M13 7l5 5m0 0l-5 5m5-5H6" />
							</svg>
						</a>
					</li>
					<li class="hover:bg-accent/10 p-2 rounded-md">
						<a href="https://github.com/cairo-book/cairo-book/pull/959" 
						   class="hover:text-accent transition-colors duration-200 flex items-center gap-2 group">
							<div class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-green-100 text-green-800">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
									<path d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"/>
								</svg>
								Merged
							</div>
							<span>Reworked byte array description</span>
							<svg class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200" 
								 xmlns="http://www.w3.org/2000/svg" 
								 fill="none" 
								 viewBox="0 0 24 24" 
								 stroke="currentColor">
								<path stroke-linecap="round" 
									  stroke-linejoin="round" 
									  stroke-width="2" 
									  d="M13 7l5 5m0 0l-5 5m5-5H6" />
							</svg>
						</a>
					</li>
					<li class="hover:bg-accent/10 p-2 rounded-md">
						<a href="https://github.com/cairo-book/cairo-book/pull/754" 
						   class="hover:text-accent transition-colors duration-200 flex items-center gap-2 group">
							<div class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-green-100 text-green-800">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
									<path d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"/>
								</svg>
								Merged
							</div>
							<span>Added smart contract testing section</span>
							<svg class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200" 
								 xmlns="http://www.w3.org/2000/svg" 
								 fill="none" 
								 viewBox="0 0 24 24" 
								 stroke="currentColor">
								<path stroke-linecap="round" 
									  stroke-linejoin="round" 
									  stroke-width="2" 
									  d="M13 7l5 5m0 0l-5 5m5-5H6" />
							</svg>
						</a>
					</li>
					<li class="hover:bg-accent/10 p-2 rounded-md">
						<a href="https://github.com/cairo-book/cairo-book/pull/544" 
						   class="hover:text-accent transition-colors duration-200 flex items-center gap-2 group">
							<div class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-green-100 text-green-800">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
									<path d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"/>
								</svg>
								Merged
							</div>
							<span>Syntax fix in dispatcher-library section</span>
							<svg class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200" 
								 xmlns="http://www.w3.org/2000/svg" 
								 fill="none" 
								 viewBox="0 0 24 24" 
								 stroke="currentColor">
								<path stroke-linecap="round" 
									  stroke-linejoin="round" 
									  stroke-width="2" 
									  d="M13 7l5 5m0 0l-5 5m5-5H6" />
							</svg>
						</a>
					</li>
				</ul>
			</div>

			<div class="rounded-lg bg-accent/10 p-6">
				<h3 class="font-semibold mb-2 text-xl text-accent border-b border-accent/20 pb-2">Orion | ZKML</h3>
				<ul class="space-y-2">
					<li class="hover:bg-accent/10 p-2 rounded-md transition-all hover:shadow-sm hover:translate-y-[-2px] duration-300">
						<a href="https://github.com/gizatechxyz/orion/pull/528" 
						   class="hover:text-accent transition-colors duration-200 flex items-center gap-2 group">
							<div class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-green-100 text-green-800">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
									<path d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"/>
								</svg>
								Merged
							</div>
							<span>Implemented ReduceLogSumExp operator</span>
							<svg class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200" 
								 xmlns="http://www.w3.org/2000/svg" 
								 fill="none" 
								 viewBox="0 0 24 24" 
								 stroke="currentColor">
								<path stroke-linecap="round" 
									  stroke-linejoin="round" 
									  stroke-width="2" 
									  d="M13 7l5 5m0 0l-5 5m5-5H6" />
							</svg>
						</a>
					</li>
				</ul>
			</div>

			<div class="rounded-lg bg-accent/10 p-6">
				<h3 class="font-semibold mb-2 text-xl text-accent border-b border-accent/20 pb-2">StarknetBook | Fullstack</h3>
				<ul class="space-y-2">
					<li class="hover:bg-accent/10 p-2 rounded-md transition-all hover:shadow-sm hover:translate-y-[-2px] duration-300">
						<a href="https://github.com/starknet-edu/starknetbook/pull/369" 
						   class="hover:text-accent transition-colors duration-200 flex items-center gap-2 group">
							<div class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-green-100 text-green-800">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
									<path d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"/>
								</svg>
								Merged
							</div>
							<span>Updated Chapter Starknet-js: Javascript SDK section</span>
							<svg class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200" 
								 xmlns="http://www.w3.org/2000/svg" 
								 fill="none" 
								 viewBox="0 0 24 24" 
								 stroke="currentColor">
								<path stroke-linecap="round" 
									  stroke-linejoin="round" 
									  stroke-width="2" 
									  d="M13 7l5 5m0 0l-5 5m5-5H6" />
							</svg>
						</a>
					</li>
				</ul>
			</div>

			<div class="rounded-lg bg-accent/10 p-6">
				<h3 class="font-semibold mb-2 text-xl text-accent border-b border-accent/20 pb-2">Ekubo | Database</h3>
				<ul class="space-y-2">
					<li class="hover:bg-accent/10 p-2 rounded-md transition-all hover:shadow-sm hover:translate-y-[-2px] duration-300">
						<a href="https://github.com/EkuboProtocol/starknet-indexer/pull/21" 
						   class="hover:text-accent transition-colors duration-200 flex items-center gap-2 group">
							<div class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-yellow-100 text-yellow-800">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
									<path d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"/>
								</svg>
								In Review
							</div>
							<span>Generate candlestick data from oracle_snapshots table</span>
							<svg class="w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200" 
								 xmlns="http://www.w3.org/2000/svg" 
								 fill="none" 
								 viewBox="0 0 24 24" 
								 stroke="currentColor">
								<path stroke-linecap="round" 
									  stroke-linejoin="round" 
									  stroke-width="2" 
									  d="M13 7l5 5m0 0l-5 5m5-5H6" />
							</svg>
						</a>
					</li>
				</ul>
			</div>
		</div>

	</section>

	<section aria-label="Blog post list" class="mt-16">
		<h2 class="title mb-4 text-3xl font-bold text-accent">Latest Posts</h2>
		<ul class="space-y-4 sm:space-y-2">
			{
				allPostsByDate.map((p) => (
					<li class="flex flex-col gap-x-2 sm:flex-row">
						<PostPreview post={p} />
					</li>
				))
			}
		</ul>
	</section>

	<section class="mt-16">
		<SocialList />
	</section>
</PageLayout>
